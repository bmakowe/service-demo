version: '3.8'

services:
  aufgaben-api:
    build:
      context: ./AufgabenService/AufgabenService.API
    ports:
      - "5001:8080"  # Port 5001 auf Host wird auf 8080 im Container gemappt
    networks:
      - microservice-network
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
    container_name: aufgaben-api

  aufgaben-client:
    build:
      context: ./AufgabenService/AufgabenService.Client
    ports:
      - "5101:80"
    depends_on:
      - aufgaben-api
    networks:
      - microservice-network
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - AufgabenApiUrl=http://aufgaben-api:8080
    container_name: aufgaben-client

  pruefung-api:
    build:
      context: ./PruefungService/PruefungService.API
    ports:
      - "5002:8080"  # Port 5002 auf Host wird auf 8080 im Container gemappt
    networks:
      - microservice-network
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
    depends_on:
      - aufgaben-api
    container_name: pruefung-api

  pruefung-client:
    build:
      context: ./PruefungService/PruefungService.Client
    ports:
      - "5102:80"
    depends_on:
      - pruefung-api
    networks:
      - microservice-network
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - PruefungApiUrl=http://pruefung-api:8080
    container_name: pruefung-client

networks:
  microservice-network:
    driver: bridge